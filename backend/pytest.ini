[pytest]
testpaths = tests
pythonpath = app
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes
    --durations=10

markers =
    unit: Unit tests (isolated, fast, no external dependencies)
    integration: Integration tests (database, services, Flask context)  
    security: Security-related tests (auth, encryption, validation)
    auth: Authentication and authorization tests
    controllers: Controller layer tests (HTTP concerns only)
    clients: Client-related functionality tests
    service_layer: Service layer tests (business logic)
    architecture: Architecture compliance tests (SOLID principles)
    extrato: Monthly financial report (extrato) tests
    logging: Logging system tests including fallback behavior
    regression: Regression tests to prevent reintroduction of fixed bugs
    sessions: marks session-related tests
    database: marks database tests
    performance: marks performance tests
    services: marks service tests
    appointment: marks appointment tests
    artist: marks artist tests
    repositories: marks repository tests
    user: marks user tests
    client: marks client tests
    api: API/Controller layer tests (HTTP endpoints)
    slow: Tests that take a long time to run
    database: Database-related tests (transaction isolation, session management)
    performance: Performance and load tests
    flask: Flask application context tests
    fixtures: Fixture and test utility tests
    postgres: PostgreSQL integration tests (use postgres_db fixture)
    drag_drop: Drag and drop related tests
    gastos: Expense/gastos related tests
    reports: Reports controller and service tests

filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::sqlalchemy.exc.MovedIn20Warning
    ignore::UserWarning:flask
    ignore::pytest.PytestUnraisableExceptionWarning
