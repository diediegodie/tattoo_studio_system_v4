<!DOCTYPE HTML>
<html>

<head>
	<title>Sessões</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
</head>

<body class="is-preload">

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Main -->
		<div id="main">
			<div class="inner">

				<!-- Header -->
				<header id="header">
					<a href="index.html" class="logo"><strong>Sessões</strong> de de clientes</a>
				</header>

				<!-- Content -->
				<section>
					<header class="main">
						<h1>Sessões</h1>
					</header>

					<!-- Nova Sessão Button -->
					<a href="{{ url_for('sessoes.nova_sessao') }}" class="button primary" style="margin-bottom: 1em;">
						Nova sessão
					</a>

					<section>
						<div class="table-wrapper">
							<table>
								<thead>
									<tr>
										<th>Data</th>
										<th>Hora</th>
										<th>Cliente</th>
										<th>Artista</th>
										<th>Valor</th>
										<th>Observações</th>
										<th>Opções</th>
									</tr>
								</thead>
								<tbody>
									{% for sessao in sessoes %}
									<tr>
										<td>{{ sessao.data.strftime('%d/%m/%Y') if sessao.data else '' }}</td>
										<td>{{ sessao.hora.strftime('%H:%M') if sessao.hora else '' }}</td>
										<td>{{ sessao.cliente.name if sessao.cliente else 'Cliente não encontrado' }}
										</td>
										<td>{{ sessao.artista.name if sessao.artista else 'Artista não encontrado' }}
										</td>
										<td>R$ {{ '{:,.2f}'.format(sessao.valor) }}</td>
										<td>{{ sessao.observacoes }}</td>
										<td>
											<button class="button small options-btn"
												onclick="toggleOptions(this)">Opções</button>
											<span class="options-actions" style="display:none;">
												<button class="button small" style="margin-right:0.5em;">Editar</button>
												<button class="button small">Excluir</button>
											</span>
										</td>
									</tr>
									{% else %}
									<tr>
										<td colspan="7">Nenhuma sessão cadastrada.</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</section>

					<script>
						function toggleOptions(btn) {
							var actions = btn.nextElementSibling;
							if (actions.style.display === "none" || actions.style.display === "") {
								actions.style.display = "inline-block";
							} else {
								actions.style.display = "none";
							}
						}
					</script>

				</section>

			</div>
		</div>

		<!-- Sidebar -->
		<div id="sidebar" class="inactive">
			<div class="toggle"></div>
			<div class="inner">

				<!-- Search -->
				<section id="search" class="alt">
					<form method="post" action="#">
						<input type="text" name="query" id="query" placeholder="Search" />
					</form>
				</section>

				<!-- Menu -->
				<nav id="menu">
					<header class="major">
						<h2>Menu</h2>
					</header>
					<ul>
						<li><a href="{{ url_for('index') }}">Homepage</a></li>
						<li><a href="{{ url_for('client.client_list') }}">Clientes</a></li>
						<li><a href="{{ url_for('estoque') }}">Estoque</a></li>
						<li><a href="{{ url_for('sessoes') }}">Sessões</a></li>
						<li><a href="{{ url_for('financeiro') }}">Financeiro</a></li>
						<li><a href="{{ url_for('registrar_pagamento') }}">Registrar Pagamento</a></li>
						<li><a href="{{ url_for('extrato') }}">Extrato</a></li>
						<li><a href="{{ url_for('cadastro_interno') }}">Cadastro Interno</a></li>
						<li><a href="{{ url_for('calculadora') }}">Calculadora</a></li>
						<li><a href="{{ url_for('historico') }}">Historico</a></li>
					</ul>
				</nav>
			</div>
		</div>
	</div>

	<!-- Scripts -->
	<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/browser.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/breakpoints.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/util.js') }}"></script>
	<script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>

</html>